- teststeps:
    - name: Listing all resources
      request:
        method: GET
        url: /posts
      extract:
        second_id: "[1].id"
      validate:
        equal:
          - [ "status_code", 200 ]
    - name: Getting a resource
      request:
        method: GET
        url: /posts/${extract(second_id)}
      validate:
        equal:
          - [ "status_code", 200 ]
- teststeps:
    - name: Creating a resource
      request:
        method: POST
        url: /posts
        headers:
          Content-Type: application/json; charset=UTF-8
        json:
          title: '${config(var_one)}'
          body: '${config(var_two)}'
          userId: 1
      validate:
        equal:
          - [ "status_code", 201 ]
          - [ "body.userId", 1 ]
          - [ "body.title", "foo" ]
          - [ "body.body", "bar" ]
- teststeps:
    - name: Getting a resource id=1+1
      request:
        method: GET
        url: /posts/${id_add_one(1)}
      validate:
        equal:
          - [ "status_code", 200 ]
    - name: Getting a resource id=2+1
      request:
        method: GET
        url: /posts/${id_add_one($second_id)}
      validate:
        equal:
          - [ "status_code", 200 ]
